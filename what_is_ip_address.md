# IPアドレスってなに

## 目次
1. TCP/IPモデルとOSI参照モデルの対応付け
2. IPアドレスとは  

### 1. TCP/IPモデルとOSI参照モデルの対応付け
#### TCP/IPモデルとOSI参照モデルのちがい
```
TCP/IPモデル　　: インターネットにおいて実際に実装されているネットワークモデル 
OSI参照モデル　 : コンピュータ通信を理解・規定、実装するうえで重要な概念モデル
```  
  
#### 対応付け
|       |  OSI参照モデル  |  TCP/IPモデル  |
| ----  | ----  | ----  |
| L7      |  アプリケーション層   |  アプリケーション層   |
| L6      |  プレゼンテーション層   |  アプリケーション層   |
| L5      |  セッション層   |  アプリケーション層   |
| L4      |  トランスポート層   |  トランスポート層   |
| L3      |  ネットワーク層   |  インターネット層   |
| L2      |  データリンク層   |  ネットワークインターフェース層   |
| L1      |  物理層   |  ネットワークインターフェース層   |  
  
  
### 2. IPアドレスとは
IPアドレスはTCP/IPモデルの「インターネット層(L3)」に当たります。  
IPv4アドレスは32bit(4Byte)で、10進数表記と2進数表記であらわせる。  

ちなみに、8bitは1Byteであらわされる。  
通信帯域を表記する、bpsはbit per second(1秒間あたりのbit数)なので要注意  
```
ex) LANのある特定のホストのIPアドレス
10進数表記: 192.168.0.1
 2進数表記: 11000000.10101000.00000000.00000001
```  
#### IPアドレスの割り当て  
IPアドレスを割り当てるのは ``` OS ```  
IPアドレスを割り当てられるのは ``` NIC(Network Interface Card) ```  
  
1つの機器に、複数のIPアドレスを持つことができる。  
  
#### IPアドレスは2種類ある  
- グローバルIPアドレス(WAN)  
- プライベートIPアドレス(LAN)  

```
グローバルIPアドレス
- インターネットの接続に不可欠(ISPと契約要)
- インターネット上に一意のアドレスである
- IPアドレスの割り当ては、動的に決まっている
- 静的なグローバルIPアドレスは高い
- 管理
      ICANN(世界)
   -> APNIC(アジア)
   -> JPNIC(日本)
   -> ISP(ソフトバンク、NTT、KDDIなど)
```  
```
プライベートIPアドレス
- LAN内で使用するIPアドレス
- 世界中で一意でなくてよいが、LAN内で一意である必要がある
- クラス分け(A, B, C)で割り当てられる範囲が決まっている
  A(大規模) : 10.0.0.0    ~ 10.255.255.255
  B(中規模) : 172.16.0.0  ~ 172.31.255.255
  C(小規模) : 192.168.0.0 ~ 192.168.255.255
  クラスは、ネットワークの規模を表している
```  

#### IPアドレスの分け方
```
クラスフルアドレッシング　： クラスA, B, Cによって、割り当てられるIPアドレスを決める。
　　　　　　　　　　　　　　 クラスA: 0.0.0.0   ~ 127.255.255.255 (ホスト数: 16,777,216)
　　　　　　　　　　　　　　 クラスB: 128.0.0.0 ~ 191.255.255.255 (ホスト数: 16,384)
　　　　　　　　　　　　　　 クラスC: 192.0.0.0 ~ 223.255.255.255 (ホスト数: 256) 
　　　　　　　　　　　　　　 クラスD: 224.0.0.0 ~ 239.255.255.255 (マルチキャスト用IP)
　　　　　　　　　　　　　　 クラスE: 240.0.0.0 ~ 255.255.255.255 (研究用、予約済み)
クラスレスアドレッシング　： クラスの概念を取り去らって、自由にサブネットを作成して、割り当てられるIPアドレスを決める。
```  

#### IPアドレスの基本構成
```
IPアドレスはネットワーク部とホスト部に分かれる。
- ネットワーク部　： サブネットマスクで「1」が立っている範囲のIPアドレス
- ホスト部　　　　： ホストに割り当てることができるIPアドレス
```  
  
#### プライベートIPアドレス「インターネットに接続したいよー」
プライベートIPアドレスとグローバルIPアドレスの紐づけを「NAT(Network Address Translation)」によって行う。  
  
ISPと契約している場合、モデムに接続するルータは、グローバルIPアドレスを持っているので、  
そのIPアドレスとプライベートIPアドレスを変換することでインターネットと接続することができる。  

しかし、NATで通信する場合、「インターネットと接続する台数分のグローバルIPアドレスが必要」となる。
台数分の契約をするのは、あまりに現実的ではないので「NAPT(Network Address Port Translation)」を利用するのが一般的。  
  
インターネットに接続する複数のプライベートIPアドレスを、1つのグローバルIPアドレスで接続するために、
「送信元IPアドレス」と「ポート番号」を利用する。  

```
ex) NAPT
- 送信時
  送信元IP　　　 : 192.168.0.1:40001
  ルータ送信元IP : 116.2.5.6:65334

- 受信時
  ルータ送信先   : 116.2.5.6:65334
  送信先IP　　　 : 192.168.0.1:40001
```  
